<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVE for Leadature - Revenue Control Panel</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .calendar-event {
            font-size: 0.7rem;
            padding: 2px 4px;
            margin-bottom: 2px;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calendar-event:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(124, 58, 237, 0.3);
        }

        .eve-gradient {
            background: linear-gradient(135deg, #7C3AED 0%, #EC4899 100%);
        }

        .eve-gradient-subtle {
            background: linear-gradient(135deg, #F3E8FF 0%, #FCE7F3 100%);
        }

        .calendar-day {
            min-height: 120px;
            transition: all 0.2s;
        }

        .calendar-day:hover {
            background: #F9FAFB;
        }

        .calendar-day.today {
            background: linear-gradient(135deg, #F3E8FF 0%, #FCE7F3 100%);
        }
    </style>
</head>
<body style="background: #FAFAFA;">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // Event stages that Leadature goes through
        const EVENT_STAGES = [
            { id: 'discovery', name: 'Discovery', icon: 'üîç' },
            { id: 'quotation', name: 'Quotation', icon: 'üí∞' },
            { id: 'tech_setup', name: 'Tech Setup', icon: '‚öôÔ∏è' },
            { id: 'equipment', name: 'Equipment', icon: 'üì¶' },
            { id: 'testing', name: 'Testing', icon: 'üß™' },
            { id: 'live', name: 'Live Event', icon: 'üéØ' },
            { id: 'post_event', name: 'Post-Event', icon: '‚úÖ' },
            { id: 'invoicing', name: 'Invoicing', icon: 'üìÑ' }
        ];

        // Sample events with realistic Leadature data
        const sampleEvents = [
            {
                id: 1,
                name: "Tech Innovation Summit 2026",
                client: "TechCorp Inc.",
                owner: "Hanna",
                contact: "Sarah Johnson",
                date: "2026-02-15",
                daysUntil: 3,
                healthScore: "red",
                revenue: 85000,
                stage: 'tech_setup',
                completedStages: ['discovery', 'quotation'],
                lastContact: "7 days ago",
                lastContactDate: "2026-02-05",
                clientSilence: true,
                risks: [
                    "Client silent for 7 days - no response to setup confirmation",
                    "API key collection pending",
                    "Venue details not confirmed"
                ],
                pendingTasks: [
                    { task: "Follow up on setup confirmation", assignee: "Hanna", urgent: true },
                    { task: "Collect API credentials", assignee: "Max", urgent: true },
                    { task: "Confirm venue WiFi specs", assignee: "Tech Team", urgent: true }
                ],
                equipment: { needed: 5, reserved: 0, location: "Orlando" },
                setupStatus: "Blocked",
                attendees: 150,
                scanType: "Badge scanning"
            },
            {
                id: 2,
                name: "Annual Leadership Retreat",
                client: "GlobalBank Ltd.",
                owner: "Max",
                contact: "Michael Chen",
                date: "2026-02-20",
                daysUntil: 8,
                healthScore: "yellow",
                revenue: 120000,
                stage: 'testing',
                completedStages: ['discovery', 'quotation', 'tech_setup', 'equipment'],
                lastContact: "2 days ago",
                lastContactDate: "2026-02-10",
                clientSilence: false,
                risks: [
                    "Equipment shipment delayed - needs expedited shipping",
                    "Testing scheduled for tomorrow"
                ],
                pendingTasks: [
                    { task: "Arrange expedited FedEx shipping", assignee: "Max", urgent: true },
                    { task: "Schedule testing call with client", assignee: "Hanna", urgent: false },
                    { task: "Prepare backup devices", assignee: "Tech Team", urgent: false }
                ],
                equipment: { needed: 12, reserved: 12, location: "Chicago" },
                setupStatus: "In Progress",
                attendees: 200,
                scanType: "Lead retrieval"
            },
            {
                id: 3,
                name: "Product Launch Event",
                client: "StartupXYZ",
                owner: "Hanna",
                contact: "Emily Rodriguez",
                date: "2026-02-18",
                daysUntil: 6,
                healthScore: "green",
                revenue: 45000,
                stage: 'live',
                completedStages: ['discovery', 'quotation', 'tech_setup', 'equipment', 'testing'],
                lastContact: "Today",
                lastContactDate: "2026-02-12",
                clientSilence: false,
                risks: [],
                pendingTasks: [
                    { task: "Final connectivity check", assignee: "Tech Team", urgent: false }
                ],
                equipment: { needed: 3, reserved: 3, location: "San Francisco", shipped: true },
                setupStatus: "Ready",
                attendees: 80,
                scanType: "QR code scanning"
            },
            {
                id: 4,
                name: "Executive Board Meeting",
                client: "FinServe Group",
                owner: "Hanna",
                contact: "David Thompson",
                date: "2026-02-25",
                daysUntil: 13,
                healthScore: "red",
                revenue: 95000,
                stage: 'quotation',
                completedStages: ['discovery'],
                lastContact: "10 days ago",
                lastContactDate: "2026-02-02",
                clientSilence: true,
                risks: [
                    "No response to quotation for 10 days",
                    "Event date approaching - decision needed",
                    "High-value opportunity at risk"
                ],
                pendingTasks: [
                    { task: "Send quotation follow-up email", assignee: "Hanna", urgent: true },
                    { task: "Call client to discuss concerns", assignee: "Max", urgent: true }
                ],
                equipment: { needed: 8, reserved: 0, location: "New York" },
                setupStatus: "Awaiting Client",
                attendees: 500,
                scanType: "Badge + Lead retrieval"
            },
            {
                id: 5,
                name: "HealthTech Conference (Reactivation)",
                client: "MediCare Solutions",
                owner: "Max",
                contact: "Lisa Wong",
                date: "2026-08-15",
                daysUntil: 184,
                healthScore: "yellow",
                revenue: 67000,
                stage: 'discovery',
                completedStages: [],
                lastContact: "6 months ago",
                lastContactDate: "2025-08-15",
                clientSilence: true,
                isReactivation: true,
                lastEventDate: "2025-08-15",
                risks: [
                    "Client hasn't been contacted about 2026 event",
                    "Ran successful event last year - opportunity to reengage"
                ],
                pendingTasks: [
                    { task: "Send reactivation email referencing last year's success", assignee: "Hanna", urgent: false },
                    { task: "Prepare last year's event summary", assignee: "Max", urgent: false }
                ],
                equipment: { needed: 10, reserved: 0, location: "Boston" },
                setupStatus: "Reactivation Needed",
                attendees: 300,
                scanType: "Lead retrieval",
                previousEvents: 3
            }
        ];

        function RevenueControlPanel() {
            const [selectedEvent, setSelectedEvent] = useState(null);
            const [view, setView] = useState('calendar'); // 'calendar', 'timeline' or 'list'
            const [showReactivation, setShowReactivation] = useState(true);
            const [currentMonth, setCurrentMonth] = useState(new Date(2026, 1, 1)); // February 2026

            // Calculate stats
            const stats = useMemo(() => {
                const activeEvents = sampleEvents.filter(e => !e.isReactivation);
                return {
                    totalRevenue: activeEvents.reduce((sum, e) => sum + e.revenue, 0),
                    atRisk: activeEvents.filter(e => e.healthScore === "red").length,
                    needsAttention: activeEvents.filter(e => e.healthScore === "yellow").length,
                    onTrack: activeEvents.filter(e => e.healthScore === "green").length,
                    totalEvents: activeEvents.length,
                    clientSilence: activeEvents.filter(e => e.clientSilence).length
                };
            }, []);

            // Today's urgent tasks across all events
            const urgentTasks = useMemo(() => {
                return sampleEvents
                    .filter(e => e.daysUntil <= 14 && !e.isReactivation)
                    .flatMap(e =>
                        e.pendingTasks
                            .filter(t => t.urgent)
                            .map(t => ({
                                ...t,
                                event: e.name,
                                eventId: e.id,
                                client: e.client,
                                daysUntil: e.daysUntil,
                                healthScore: e.healthScore
                            }))
                    )
                    .sort((a, b) => a.daysUntil - b.daysUntil);
            }, []);

            // Reactivation opportunities
            const reactivationOpps = useMemo(() => {
                return sampleEvents.filter(e => e.isReactivation);
            }, []);

            // Calendar helper functions
            const getDaysInMonth = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth();
                return new Date(year, month + 1, 0).getDate();
            };

            const getFirstDayOfMonth = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth();
                return new Date(year, month, 1).getDay();
            };

            const generateCalendarDays = () => {
                const daysInMonth = getDaysInMonth(currentMonth);
                const firstDay = getFirstDayOfMonth(currentMonth);
                const days = [];

                // Add empty cells for days before the first day of the month
                for (let i = 0; i < firstDay; i++) {
                    days.push(null);
                }

                // Add days of the month
                for (let day = 1; day <= daysInMonth; day++) {
                    days.push(day);
                }

                return days;
            };

            const getEventsForDay = (day) => {
                if (!day) return [];
                const year = currentMonth.getFullYear();
                const month = currentMonth.getMonth();
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;

                return sampleEvents.filter(e => !e.isReactivation && e.date === dateStr);
            };

            const isToday = (day) => {
                if (!day) return false;
                const today = new Date(2026, 1, 12); // Feb 12, 2026
                const year = currentMonth.getFullYear();
                const month = currentMonth.getMonth();
                return day === today.getDate() && month === today.getMonth() && year === today.getFullYear();
            };

            const getHealthColor = (health) => {
                switch(health) {
                    case "green": return "bg-green-500";
                    case "yellow": return "bg-yellow-500";
                    case "red": return "bg-red-500";
                    default: return "bg-gray-500";
                }
            };

            const getHealthBorder = (health) => {
                switch(health) {
                    case "green": return "border-green-500";
                    case "yellow": return "border-yellow-500";
                    case "red": return "border-red-500";
                    default: return "border-gray-500";
                }
            };

            const getHealthBg = (health) => {
                switch(health) {
                    case "green": return "bg-green-50 border-green-300";
                    case "yellow": return "bg-yellow-50 border-yellow-300";
                    case "red": return "bg-red-50 border-red-300";
                    default: return "bg-gray-50 border-gray-300";
                }
            };

            const formatDate = (dateStr) => {
                const date = new Date(dateStr);
                return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
            };

            const formatMonthYear = (date) => {
                return date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            };

            const changeMonth = (delta) => {
                const newDate = new Date(currentMonth);
                newDate.setMonth(newDate.getMonth() + delta);
                setCurrentMonth(newDate);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
                    {/* Header */}
                    <header className="bg-white border-b border-gray-200 shadow-sm sticky top-0 z-10">
                        <div className="max-w-7xl mx-auto px-6 py-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center space-x-4">
                                    <div className="flex items-center space-x-3">
                                        <div className="eve-gradient w-10 h-10 rounded-xl flex items-center justify-center shadow-lg">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="white" opacity="0.9"/>
                                                <path d="M2 17L12 22L22 17" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                                                <path d="M2 12L12 17L22 12" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <div className="flex items-center space-x-2">
                                                <h1 className="text-2xl font-bold" style={{ color: '#7C3AED' }}>EVE</h1>
                                                <span className="text-gray-400">√ó</span>
                                                <span className="text-xl font-semibold text-gray-700">Leadature</span>
                                            </div>
                                            <p className="text-xs text-gray-500">Revenue Control Panel ¬∑ POC-1</p>
                                        </div>
                                    </div>
                                </div>
                                <div className="flex items-center space-x-4">
                                    <div className="text-right">
                                        <p className="text-sm text-gray-500">Today: Feb 12, 2026</p>
                                        <p className="text-sm font-semibold text-gray-900">Welcome, Max</p>
                                    </div>
                                    <div className="w-10 h-10 rounded-full flex items-center justify-center eve-gradient shadow-lg">
                                        <span className="text-white font-semibold">M</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>

                    <div className="max-w-7xl mx-auto px-6 py-8">
                        {/* Stats Overview */}
                        <div className="grid grid-cols-2 md:grid-cols-6 gap-4 mb-8">
                            <div className="bg-white rounded-xl shadow-sm p-6 border border-purple-100">
                                <p className="text-sm text-gray-500 mb-1">Pipeline Value</p>
                                <p className="text-2xl font-bold" style={{ color: "#7C3AED" }}>${(stats.totalRevenue / 1000).toFixed(0)}K</p>
                            </div>
                            <div className="bg-white rounded-xl shadow-sm p-6 border border-purple-100">
                                <p className="text-sm text-gray-500 mb-1">Active Events</p>
                                <p className="text-2xl font-bold text-gray-900">{stats.totalEvents}</p>
                            </div>
                            <div className="bg-red-50 rounded-xl shadow-sm p-6 border border-red-200">
                                <p className="text-sm text-red-700 mb-1">‚ö†Ô∏è At Risk</p>
                                <p className="text-2xl font-bold text-red-900">{stats.atRisk}</p>
                            </div>
                            <div className="bg-yellow-50 rounded-xl shadow-sm p-6 border border-yellow-200">
                                <p className="text-sm text-yellow-700 mb-1">‚ö° Needs Action</p>
                                <p className="text-2xl font-bold text-yellow-900">{stats.needsAttention}</p>
                            </div>
                            <div className="bg-green-50 rounded-xl shadow-sm p-6 border border-green-200">
                                <p className="text-sm text-green-700 mb-1">‚úì On Track</p>
                                <p className="text-2xl font-bold text-green-900">{stats.onTrack}</p>
                            </div>
                            <div className="bg-orange-50 rounded-xl shadow-sm p-6 border border-orange-200">
                                <p className="text-sm text-orange-700 mb-1">üîá Client Silence</p>
                                <p className="text-2xl font-bold text-orange-900">{stats.clientSilence}</p>
                            </div>
                        </div>

                        {/* Today's Urgent Tasks */}
                        {urgentTasks.length > 0 && (
                            <div className="bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-600 rounded-lg shadow-md p-6 mb-8">
                                <div className="flex items-start">
                                    <div className="flex-shrink-0">
                                        <svg className="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </div>
                                    <div className="ml-4 flex-1">
                                        <h3 className="text-lg font-bold text-red-900 mb-4">üö® Today's Urgent Actions ({urgentTasks.length})</h3>
                                        <div className="space-y-3">
                                            {urgentTasks.map((task, idx) => (
                                                <div key={idx} className="bg-white rounded-lg p-4 border border-red-200 hover:border-red-400 transition-colors">
                                                    <div className="flex items-start justify-between">
                                                        <div className="flex-1">
                                                            <div className="flex items-center space-x-2 mb-2">
                                                                <span className={`w-3 h-3 rounded-full ${getHealthColor(task.healthScore)}`}></span>
                                                                <span className="font-semibold text-gray-900">{task.event}</span>
                                                                <span className="px-2 py-0.5 bg-red-100 text-red-800 text-xs font-medium rounded">
                                                                    {task.daysUntil} days
                                                                </span>
                                                            </div>
                                                            <p className="text-sm text-gray-600 mb-1">{task.client}</p>
                                                            <p className="text-base text-gray-900 font-medium mb-2">{task.task}</p>
                                                            <div className="flex items-center space-x-4 text-sm">
                                                                <span className="text-gray-600">Assigned to: <span className="font-medium text-purple-600">{task.assignee}</span></span>
                                                            </div>
                                                        </div>
                                                        <button
                                                            onClick={() => setSelectedEvent(sampleEvents.find(e => e.id === task.eventId))}
                                                            className="ml-4 px-4 py-2 text-white text-sm font-medium rounded-xl transition-all shadow-md hover:shadow-lg eve-gradient whitespace-nowrap"
                                                        >
                                                            Generate Email
                                                        </button>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Reactivation Opportunities */}
                        {showReactivation && reactivationOpps.length > 0 && (
                            <div className="bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-600 rounded-lg shadow-md p-6 mb-8">
                                <div className="flex items-start">
                                    <div className="flex-shrink-0">
                                        <svg className="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                                        </svg>
                                    </div>
                                    <div className="ml-4 flex-1">
                                        <div className="flex items-center justify-between mb-4">
                                            <h3 className="text-lg font-bold text-blue-900">üîÑ Reactivation Opportunities ({reactivationOpps.length})</h3>
                                            <button
                                                onClick={() => setShowReactivation(false)}
                                                className="text-blue-600 hover:text-blue-800 text-sm font-medium"
                                            >
                                                Dismiss
                                            </button>
                                        </div>
                                        <div className="space-y-3">
                                            {reactivationOpps.map((event) => (
                                                <div key={event.id} className="bg-white rounded-lg p-4 border border-blue-200 hover:border-blue-400 transition-colors">
                                                    <div className="flex items-start justify-between">
                                                        <div className="flex-1">
                                                            <div className="flex items-center space-x-2 mb-2">
                                                                <span className="font-semibold text-gray-900">{event.client}</span>
                                                                <span className="px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-medium rounded">
                                                                    Last event: {formatDate(event.lastEventDate)}
                                                                </span>
                                                            </div>
                                                            <p className="text-sm text-gray-600 mb-2">
                                                                Previous event: {event.name} ‚Ä¢ {event.previousEvents} events total ‚Ä¢ ${(event.revenue / 1000).toFixed(0)}K avg revenue
                                                            </p>
                                                            <p className="text-sm text-blue-700 font-medium">
                                                                üí° Suggested: "Hi {event.contact}, last year's {event.name} was a success with {event.attendees} attendees. Planning for 2026?"
                                                            </p>
                                                        </div>
                                                        <button
                                                            onClick={() => setSelectedEvent(event)}
                                                            className="ml-4 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap"
                                                        >
                                                            Engage
                                                        </button>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* View Toggle */}
                        <div className="flex items-center justify-between mb-6">
                            <h2 className="text-xl font-bold text-gray-900">
                                {view === 'calendar' ? `Event Calendar - ${formatMonthYear(currentMonth)}` : 'Event Calendar (Next 60 Days)'}
                            </h2>
                            <div className="flex items-center space-x-2 bg-white rounded-lg shadow-sm border border-gray-200 p-1">
                                <button
                                    onClick={() => setView('calendar')}
                                    className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${
                                        view === 'calendar'
                                            ? 'eve-gradient text-white'
                                            : 'text-gray-600 hover:text-gray-900'
                                    }`}
                                >
                                    üìÖ Calendar View
                                </button>
                                <button
                                    onClick={() => setView('timeline')}
                                    className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${
                                        view === 'timeline'
                                            ? 'eve-gradient text-white'
                                            : 'text-gray-600 hover:text-gray-900'
                                    }`}
                                >
                                    üìä Timeline View
                                </button>
                                <button
                                    onClick={() => setView('list')}
                                    className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${
                                        view === 'list'
                                            ? 'eve-gradient text-white'
                                            : 'text-gray-600 hover:text-gray-900'
                                    }`}
                                >
                                    üìã List View
                                </button>
                            </div>
                        </div>

                        {/* Calendar View */}
                        {view === 'calendar' && (
                            <div className="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                                {/* Calendar Header */}
                                <div className="p-4 border-b border-gray-200 flex items-center justify-between">
                                    <button
                                        onClick={() => changeMonth(-1)}
                                        className="px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"
                                    >
                                        ‚Üê Previous
                                    </button>
                                    <h3 className="text-lg font-bold text-gray-900">{formatMonthYear(currentMonth)}</h3>
                                    <button
                                        onClick={() => changeMonth(1)}
                                        className="px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"
                                    >
                                        Next ‚Üí
                                    </button>
                                </div>

                                {/* Calendar Grid */}
                                <div className="p-4">
                                    {/* Day Headers */}
                                    <div className="grid grid-cols-7 gap-2 mb-2">
                                        {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (
                                            <div key={day} className="text-center font-semibold text-gray-600 text-sm py-2">
                                                {day}
                                            </div>
                                        ))}
                                    </div>

                                    {/* Calendar Days */}
                                    <div className="grid grid-cols-7 gap-2">
                                        {generateCalendarDays().map((day, idx) => {
                                            const events = getEventsForDay(day);
                                            const today = isToday(day);

                                            return (
                                                <div
                                                    key={idx}
                                                    className={`calendar-day border rounded-lg p-2 ${
                                                        day ? 'bg-white' : 'bg-gray-50'
                                                    } ${today ? 'today border-purple-400 border-2' : 'border-gray-200'}`}
                                                >
                                                    {day && (
                                                        <>
                                                            <div className={`text-sm font-semibold mb-2 ${
                                                                today ? 'text-purple-700' : 'text-gray-700'
                                                            }`}>
                                                                {day}
                                                                {today && <span className="ml-1 text-xs">(Today)</span>}
                                                            </div>
                                                            <div className="space-y-1">
                                                                {events.map(event => (
                                                                    <div
                                                                        key={event.id}
                                                                        onClick={() => setSelectedEvent(event)}
                                                                        className={`calendar-event border ${getHealthBg(event.healthScore)} cursor-pointer`}
                                                                    >
                                                                        <div className="flex items-center space-x-1">
                                                                            <span className={`w-2 h-2 rounded-full flex-shrink-0 ${getHealthColor(event.healthScore)}`}></span>
                                                                            <span className="font-medium truncate text-gray-900">{event.name}</span>
                                                                        </div>
                                                                        <div className="text-xs text-gray-600 truncate">{event.client}</div>
                                                                        <div className="text-xs font-semibold text-green-700">${(event.revenue / 1000).toFixed(0)}K</div>
                                                                    </div>
                                                                ))}
                                                            </div>
                                                        </>
                                                    )}
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>

                                {/* Calendar Legend */}
                                <div className="p-4 border-t border-gray-200 bg-gray-50">
                                    <div className="flex items-center justify-center space-x-6 text-sm">
                                        <div className="flex items-center space-x-2">
                                            <span className="w-3 h-3 rounded-full bg-green-500"></span>
                                            <span className="text-gray-700">On Track</span>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <span className="w-3 h-3 rounded-full bg-yellow-500"></span>
                                            <span className="text-gray-700">Needs Attention</span>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <span className="w-3 h-3 rounded-full bg-red-500"></span>
                                            <span className="text-gray-700">At Risk</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Timeline View */}
                        {view === 'timeline' && (
                            <div className="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                                <div className="p-6">
                                    {/* Timeline */}
                                    <div className="relative">
                                        {/* Timeline line */}
                                        <div className="absolute left-8 top-0 bottom-0 w-0.5 bg-gray-300"></div>

                                        {/* Events on timeline */}
                                        <div className="space-y-8">
                                            {sampleEvents
                                                .filter(e => !e.isReactivation)
                                                .sort((a, b) => a.daysUntil - b.daysUntil)
                                                .map((event, idx) => (
                                                    <div key={event.id} className="relative pl-16">
                                                        {/* Timeline dot */}
                                                        <div className={`absolute left-6 w-5 h-5 rounded-full border-4 border-white ${getHealthColor(event.healthScore)}`}></div>

                                                        {/* Event card */}
                                                        <div
                                                            className={`border-2 ${getHealthBorder(event.healthScore)} rounded-lg p-6 hover:shadow-lg transition-all cursor-pointer bg-white`}
                                                            onClick={() => setSelectedEvent(event)}
                                                        >
                                                            {/* Header */}
                                                            <div className="flex items-start justify-between mb-4">
                                                                <div className="flex-1">
                                                                    <div className="flex items-center space-x-3 mb-2">
                                                                        <h3 className="text-xl font-bold text-gray-900">{event.name}</h3>
                                                                        <span className={`px-3 py-1 text-sm font-bold rounded-full ${
                                                                            event.daysUntil <= 3 ? 'bg-red-100 text-red-800' :
                                                                            event.daysUntil <= 7 ? 'bg-orange-100 text-orange-800' :
                                                                            event.daysUntil <= 14 ? 'bg-yellow-100 text-yellow-800' :
                                                                            'bg-gray-100 text-gray-800'
                                                                        }`}>
                                                                            {event.daysUntil} days
                                                                        </span>
                                                                        {event.clientSilence && (
                                                                            <span className="px-2 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded flex items-center">
                                                                                üîá Client Silent
                                                                            </span>
                                                                        )}
                                                                    </div>
                                                                    <div className="flex items-center space-x-4 text-sm text-gray-600">
                                                                        <span className="font-medium">{event.client}</span>
                                                                        <span>‚Ä¢</span>
                                                                        <span>{formatDate(event.date)}</span>
                                                                        <span>‚Ä¢</span>
                                                                        <span className="font-medium text-green-700">${(event.revenue / 1000).toFixed(0)}K</span>
                                                                        <span>‚Ä¢</span>
                                                                        <span>{event.attendees} attendees</span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            {/* Stage Progress */}
                                                            <div className="mb-4">
                                                                <div className="flex items-center justify-between mb-2">
                                                                    <p className="text-sm font-semibold text-gray-700">Event Setup Progress</p>
                                                                    <span className={`px-2 py-1 rounded text-xs font-medium ${
                                                                        event.setupStatus === 'Ready' ? 'bg-green-100 text-green-800' :
                                                                        event.setupStatus === 'In Progress' ? 'bg-blue-100 text-blue-800' :
                                                                        event.setupStatus === 'Blocked' ? 'bg-red-100 text-red-800' :
                                                                        'bg-gray-100 text-gray-800'
                                                                    }`}>
                                                                        {event.setupStatus}
                                                                    </span>
                                                                </div>
                                                                <div className="flex items-center space-x-2">
                                                                    {EVENT_STAGES.map((stage) => {
                                                                        const isCompleted = event.completedStages.includes(stage.id);
                                                                        const isCurrent = event.stage === stage.id;
                                                                        return (
                                                                            <div key={stage.id} className="flex-1">
                                                                                <div className={`h-2 rounded-full ${
                                                                                    isCompleted ? 'bg-green-500' :
                                                                                    isCurrent ? 'bg-blue-500' :
                                                                                    'bg-gray-200'
                                                                                }`}></div>
                                                                                <p className={`text-xs mt-1 text-center ${
                                                                                    isCurrent ? 'font-bold text-blue-700' : 'text-gray-500'
                                                                                }`}>
                                                                                    {stage.icon}
                                                                                </p>
                                                                            </div>
                                                                        );
                                                                    })}
                                                                </div>
                                                            </div>

                                                            {/* Last Contact & Equipment */}
                                                            <div className="grid grid-cols-3 gap-4 mb-4">
                                                                <div className="bg-gray-50 rounded p-3">
                                                                    <p className="text-xs text-gray-500 mb-1">Last Contact</p>
                                                                    <p className={`text-sm font-semibold ${
                                                                        event.clientSilence ? 'text-orange-700' : 'text-gray-900'
                                                                    }`}>
                                                                        {event.lastContact}
                                                                    </p>
                                                                </div>
                                                                <div className="bg-gray-50 rounded p-3">
                                                                    <p className="text-xs text-gray-500 mb-1">Equipment</p>
                                                                    <p className="text-sm font-semibold text-gray-900">
                                                                        {event.equipment.reserved}/{event.equipment.needed} devices
                                                                        {event.equipment.shipped && <span className="text-green-600"> ‚úì Shipped</span>}
                                                                    </p>
                                                                </div>
                                                                <div className="bg-gray-50 rounded p-3">
                                                                    <p className="text-xs text-gray-500 mb-1">Location</p>
                                                                    <p className="text-sm font-semibold text-gray-900">{event.equipment.location}</p>
                                                                </div>
                                                            </div>

                                                            {/* Risks */}
                                                            {event.risks.length > 0 && (
                                                                <div className="bg-red-50 border border-red-200 rounded-lg p-3 mb-4">
                                                                    <p className="text-xs font-bold text-red-900 mb-2">‚ö†Ô∏è ACTIVE RISKS:</p>
                                                                    <ul className="space-y-1">
                                                                        {event.risks.map((risk, idx) => (
                                                                            <li key={idx} className="text-sm text-red-800 flex items-start">
                                                                                <span className="mr-2">‚Ä¢</span>
                                                                                <span>{risk}</span>
                                                                            </li>
                                                                        ))}
                                                                    </ul>
                                                                </div>
                                                            )}

                                                            {/* Pending Tasks */}
                                                            {event.pendingTasks.length > 0 && (
                                                                <div className="border-t border-gray-200 pt-4">
                                                                    <p className="text-sm font-semibold text-gray-700 mb-3">
                                                                        Pending Tasks ({event.pendingTasks.length})
                                                                    </p>
                                                                    <div className="space-y-2">
                                                                        {event.pendingTasks.map((task, idx) => (
                                                                            <div key={idx} className="flex items-center justify-between text-sm">
                                                                                <div className="flex items-center flex-1">
                                                                                    <span className={task.urgent ? 'font-semibold text-red-700' : 'text-gray-700'}>
                                                                                        {task.urgent && 'üî• '}
                                                                                        {task.task}
                                                                                    </span>
                                                                                </div>
                                                                                <span className="text-xs text-gray-500 ml-4">‚Üí {task.assignee}</span>
                                                                            </div>
                                                                        ))}
                                                                    </div>
                                                                </div>
                                                            )}
                                                        </div>
                                                    </div>
                                                ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* List View */}
                        {view === 'list' && (
                            <div className="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                                <table className="w-full">
                                    <thead className="bg-gray-50 border-b border-purple-100">
                                        <tr>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Event / Client</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Stage</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Revenue</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tasks</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"></th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-gray-200">
                                        {sampleEvents
                                            .filter(e => !e.isReactivation)
                                            .sort((a, b) => a.daysUntil - b.daysUntil)
                                            .map((event) => (
                                                <tr key={event.id} className="hover:bg-gray-50 cursor-pointer" onClick={() => setSelectedEvent(event)}>
                                                    <td className="px-6 py-4 whitespace-nowrap">
                                                        <div className="flex items-center space-x-2">
                                                            <div className={`w-3 h-3 rounded-full ${getHealthColor(event.healthScore)}`}></div>
                                                            <span className="text-xs font-medium text-gray-600">{event.daysUntil}d</span>
                                                            {event.clientSilence && <span className="text-xs">üîá</span>}
                                                        </div>
                                                    </td>
                                                    <td className="px-6 py-4">
                                                        <div>
                                                            <p className="text-sm font-semibold text-gray-900">{event.name}</p>
                                                            <p className="text-xs text-gray-500">{event.client}</p>
                                                        </div>
                                                    </td>
                                                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                                                        {formatDate(event.date)}
                                                    </td>
                                                    <td className="px-6 py-4 whitespace-nowrap">
                                                        <span className="text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded">
                                                            {EVENT_STAGES.find(s => s.id === event.stage)?.name}
                                                        </span>
                                                    </td>
                                                    <td className="px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-700">
                                                        ${(event.revenue / 1000).toFixed(0)}K
                                                    </td>
                                                    <td className="px-6 py-4 whitespace-nowrap">
                                                        <span className="text-sm text-gray-600">
                                                            {event.pendingTasks.filter(t => t.urgent).length > 0 && (
                                                                <span className="text-red-600 font-semibold">üî• {event.pendingTasks.filter(t => t.urgent).length}</span>
                                                            )}
                                                            {event.pendingTasks.filter(t => t.urgent).length === 0 && (
                                                                <span>{event.pendingTasks.length}</span>
                                                            )}
                                                        </span>
                                                    </td>
                                                    <td className="px-6 py-4 whitespace-nowrap text-right text-sm">
                                                        <button className="text-purple-600 hover:text-indigo-900 font-medium">
                                                            View ‚Üí
                                                        </button>
                                                    </td>
                                                </tr>
                                            ))}
                                    </tbody>
                                </table>
                            </div>
                        )}
                    </div>

                    {/* Event Detail Modal */}
                    {selectedEvent && (
                        <div
                            className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto"
                            onClick={() => setSelectedEvent(null)}
                        >
                            <div
                                className="bg-white rounded-lg shadow-xl max-w-4xl w-full my-8"
                                onClick={(e) => e.stopPropagation()}
                            >
                                {/* Modal Header */}
                                <div className={`sticky top-0 border-b-4 ${getHealthBorder(selectedEvent.healthScore)} px-6 py-4 bg-white rounded-t-lg`}>
                                    <div className="flex items-start justify-between">
                                        <div className="flex-1">
                                            <div className="flex items-center space-x-3 mb-2">
                                                <h2 className="text-2xl font-bold text-gray-900">{selectedEvent.name}</h2>
                                                <span className={`px-3 py-1 text-sm font-bold rounded-full ${
                                                    selectedEvent.daysUntil <= 3 ? 'bg-red-100 text-red-800' :
                                                    selectedEvent.daysUntil <= 7 ? 'bg-orange-100 text-orange-800' :
                                                    'bg-gray-100 text-gray-800'
                                                }`}>
                                                    {selectedEvent.daysUntil} days until event
                                                </span>
                                            </div>
                                            <p className="text-gray-600">{selectedEvent.client} ‚Ä¢ {selectedEvent.contact}</p>
                                        </div>
                                        <button
                                            onClick={() => setSelectedEvent(null)}
                                            className="text-gray-400 hover:text-gray-600 ml-4"
                                        >
                                            <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>

                                <div className="p-6 max-h-[70vh] overflow-y-auto">
                                    {/* Health Status */}
                                    <div className={`rounded-lg p-4 mb-6 ${
                                        selectedEvent.healthScore === 'red' ? 'bg-red-50 border-2 border-red-200' :
                                        selectedEvent.healthScore === 'yellow' ? 'bg-yellow-50 border-2 border-yellow-200' :
                                        'bg-green-50 border-2 border-green-200'
                                    }`}>
                                        <div className="flex items-center justify-between">
                                            <div className="flex items-center space-x-3">
                                                <div className={`w-6 h-6 rounded-full ${getHealthColor(selectedEvent.healthScore)}`}></div>
                                                <div>
                                                    <p className="font-bold text-gray-900 uppercase">
                                                        Health: {selectedEvent.healthScore}
                                                    </p>
                                                    <p className="text-sm text-gray-600">{selectedEvent.setupStatus}</p>
                                                </div>
                                            </div>
                                            {selectedEvent.clientSilence && (
                                                <span className="px-3 py-1 bg-orange-100 text-orange-800 text-sm font-medium rounded">
                                                    üîá Client Silent: {selectedEvent.lastContact}
                                                </span>
                                            )}
                                        </div>
                                    </div>

                                    {/* Event Details Grid */}
                                    <div className="grid grid-cols-2 gap-4 mb-6">
                                        <div className="bg-gray-50 rounded-lg p-4">
                                            <p className="text-sm text-gray-500 mb-1">Event Date</p>
                                            <p className="text-lg font-semibold text-gray-900">{formatDate(selectedEvent.date)}</p>
                                        </div>
                                        <div className="bg-gray-50 rounded-lg p-4">
                                            <p className="text-sm text-gray-500 mb-1">Revenue Value</p>
                                            <p className="text-lg font-semibold text-green-700">${selectedEvent.revenue.toLocaleString()}</p>
                                        </div>
                                        <div className="bg-gray-50 rounded-lg p-4">
                                            <p className="text-sm text-gray-500 mb-1">Expected Attendees</p>
                                            <p className="text-lg font-semibold text-gray-900">{selectedEvent.attendees}</p>
                                        </div>
                                        <div className="bg-gray-50 rounded-lg p-4">
                                            <p className="text-sm text-gray-500 mb-1">Scan Type</p>
                                            <p className="text-lg font-semibold text-gray-900">{selectedEvent.scanType}</p>
                                        </div>
                                    </div>

                                    {/* Equipment Status */}
                                    <div className="mb-6">
                                        <h3 className="text-lg font-bold text-gray-900 mb-3">üì¶ Equipment Status</h3>
                                        <div className="bg-gray-50 rounded-lg p-4">
                                            <div className="flex items-center justify-between mb-2">
                                                <span className="text-gray-700">Devices Reserved</span>
                                                <span className="font-semibold">{selectedEvent.equipment.reserved} / {selectedEvent.equipment.needed}</span>
                                            </div>
                                            <div className="w-full bg-gray-200 rounded-full h-2 mb-3">
                                                <div
                                                    className={`h-2 rounded-full ${
                                                        selectedEvent.equipment.reserved === selectedEvent.equipment.needed ? 'bg-green-500' : 'bg-yellow-500'
                                                    }`}
                                                    style={{ width: `${(selectedEvent.equipment.reserved / selectedEvent.equipment.needed) * 100}%` }}
                                                ></div>
                                            </div>
                                            <div className="flex items-center justify-between text-sm">
                                                <span className="text-gray-600">Ship to: {selectedEvent.equipment.location}</span>
                                                {selectedEvent.equipment.shipped && (
                                                    <span className="text-green-600 font-medium">‚úì Shipped</span>
                                                )}
                                            </div>
                                        </div>
                                    </div>

                                    {/* Project Stage Progress */}
                                    <div className="mb-6">
                                        <h3 className="text-lg font-bold text-gray-900 mb-3">Event Setup Progress</h3>
                                        <div className="space-y-2">
                                            {EVENT_STAGES.map((stage) => {
                                                const isCompleted = selectedEvent.completedStages.includes(stage.id);
                                                const isCurrent = selectedEvent.stage === stage.id;
                                                return (
                                                    <div key={stage.id} className="flex items-center space-x-3">
                                                        <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm ${
                                                            isCompleted ? 'bg-green-500 text-white' :
                                                            isCurrent ? 'bg-blue-500 text-white' :
                                                            'bg-gray-200 text-gray-500'
                                                        }`}>
                                                            {isCompleted ? '‚úì' : stage.icon}
                                                        </div>
                                                        <span className={`flex-1 ${
                                                            isCurrent ? 'font-bold text-blue-700' :
                                                            isCompleted ? 'text-gray-600' :
                                                            'text-gray-400'
                                                        }`}>
                                                            {stage.name}
                                                        </span>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>

                                    {/* Risks */}
                                    {selectedEvent.risks.length > 0 && (
                                        <div className="mb-6">
                                            <h3 className="text-lg font-bold text-red-900 mb-3">‚ö†Ô∏è Active Risks</h3>
                                            <div className="bg-red-50 border border-red-200 rounded-lg p-4">
                                                <ul className="space-y-2">
                                                    {selectedEvent.risks.map((risk, idx) => (
                                                        <li key={idx} className="flex items-start text-red-800">
                                                            <span className="mr-2">‚Ä¢</span>
                                                            <span>{risk}</span>
                                                        </li>
                                                    ))}
                                                </ul>
                                            </div>
                                        </div>
                                    )}

                                    {/* Pending Tasks */}
                                    {selectedEvent.pendingTasks.length > 0 && (
                                        <div className="mb-6">
                                            <h3 className="text-lg font-bold text-gray-900 mb-3">
                                                Pending Tasks ({selectedEvent.pendingTasks.filter(t => t.urgent).length} urgent)
                                            </h3>
                                            <div className="space-y-2">
                                                {selectedEvent.pendingTasks.map((task, idx) => (
                                                    <div key={idx} className={`p-3 rounded-lg border ${
                                                        task.urgent ? 'bg-red-50 border-red-200' : 'bg-gray-50 border-gray-200'
                                                    }`}>
                                                        <div className="flex items-start justify-between">
                                                            <div className="flex items-start flex-1">
                                                                <div className="flex-1">
                                                                    <p className={`font-medium ${task.urgent ? 'text-red-900' : 'text-gray-900'}`}>
                                                                        {task.urgent && 'üî• '}
                                                                        {task.task}
                                                                    </p>
                                                                    <p className="text-sm text-gray-600 mt-1">Assigned to: {task.assignee}</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}

                                    {/* Action Buttons */}
                                    <div className="flex space-x-3">
                                        <button className="flex-1 px-4 py-3 eve-gradient text-white font-medium rounded-lg hover:shadow-lg transition-colors">
                                            üìß Generate Email
                                        </button>

                                        <button className="flex-1 px-4 py-3 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition-colors">
                                            üìÖ Add to Calendar
                                        </button>
                                    </div>

                                    {/* AI Suggestions */}
                                    {selectedEvent.healthScore !== 'green' && (
                                        <div className="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
                                            <h4 className="font-semibold text-blue-900 mb-2">üí° EVE Suggests:</h4>
                                            <ul className="space-y-2 text-sm text-blue-800">
                                                {selectedEvent.clientSilence && (
                                                    <>
                                                        <li>‚Ä¢ Send immediate follow-up: "Hi {selectedEvent.contact}, checking in on setup confirmation for {selectedEvent.name}"</li>
                                                        <li>‚Ä¢ Schedule call to address concerns - event is only {selectedEvent.daysUntil} days away</li>
                                                    </>
                                                )}
                                                {selectedEvent.equipment.reserved < selectedEvent.equipment.needed && (
                                                    <li>‚Ä¢ Reserve remaining {selectedEvent.equipment.needed - selectedEvent.equipment.reserved} devices from inventory</li>
                                                )}
                                                {selectedEvent.healthScore === 'red' && (
                                                    <li>‚Ä¢ Escalate to team: This ${(selectedEvent.revenue / 1000).toFixed(0)}K opportunity needs immediate attention</li>
                                                )}
                                            </ul>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<RevenueControlPanel />, document.getElementById('root'));
    </script>
</body>
</html>
